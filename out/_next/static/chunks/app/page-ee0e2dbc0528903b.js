(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5227:(e,r,t)=>{Promise.resolve().then(t.bind(t,9547))},9547:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>M});var o=t(5155),i=t(2115),n=t(877),l=t(1607),s=t(9650),a=t(3448),d=t(3532),c=t(8050),u=t(419),h=t(8107),p=t(6989),g=t(790),x=t(9240),m=t(9698),f=t(7057),b=t(9988),j=t(3436),v=t(5987),w=t(7480),y=t(8787),S=t(8678),E=t(4110),C=t(8058),T=t(9779),k=t(3905),A=t(7599),z=t(6057),R=t(1373),I=t(4391),P=t(7787),D=t(9803);l.t1.register(l.PP,l.kc,l.E8,l.hE,l.m_,l.s$);let W=e=>e?Math.ceil(e.length/4):0,q=e=>{let r=[],t=new Set;for(let o of e)t.has(o.id)||(t.add(o.id),r.push(o));return r};function M(){let[e,r]=(0,i.useState)([]),[t,l]=(0,i.useState)([]),[M,F]=(0,i.useState)(1),[L,N]=(0,i.useState)(!1),[O,U]=(0,i.useState)(null),[_,B]=(0,i.useState)(0),[$,Q]=(0,i.useState)('Output only uppercase letter answers in numbered order, one per line, exactly in the format "1. A". No extra text, explanations, symbols, or blank lines allowed. Maintain original question order.'),[J,V]=(0,i.useState)([]),[Y,G]=(0,i.useState)([]),[X,H]=(0,i.useState)(!1),[K,Z]=(0,i.useState)(!1),[ee,er]=(0,i.useState)(!1),[et,eo]=(0,i.useState)(!1),[ei,en]=(0,i.useState)(!1),[el,es]=(0,i.useState)(null),[ea,ed]=(0,i.useState)({current:0,total:0}),[ec,eu]=(0,i.useState)(null),[eh,ep]=(0,i.useState)(""),[eg,ex]=(0,i.useState)("results"),[em,ef]=(0,i.useState)("table"),[eb,ej]=(0,i.useState)("bar"),[ev,ew]=(0,i.useState)("table"),[ey,eS]=(0,i.useState)("by-class"),[eE,eC]=(0,i.useState)([]),[eT,ek]=(0,i.useState)("openai"),[eA,ez]=(0,i.useState)({openai:{key:"",baseUrl:"https://api.openai.com/v1"},deepseek:{key:"",baseUrl:"https://api.deepseek.com/v1"},openwebui:{key:"",baseUrl:"http://localhost:3001/v1"}}),[eR,eI]=(0,i.useState)([]),[eP,eD]=(0,i.useState)(!1),eW=(0,i.useRef)(!1),eq=(0,i.useRef)(!1);(0,i.useEffect)(()=>{let e=localStorage.getItem("storedApiConfigs");if(e)try{let r=JSON.parse(e);eI(r)}catch(e){}let r=localStorage.getItem("availableModels");if(r)try{let e=JSON.parse(r),t=q(e);t.length!==e.length&&localStorage.setItem("availableModels",JSON.stringify(t)),l(t)}catch(e){}},[]),(0,i.useEffect)(()=>(eR.length>0&&"true"!==localStorage.getItem("hasLoadedModels")&&(eK(),localStorage.setItem("hasLoadedModels","true")),()=>{localStorage.removeItem("hasLoadedModels")}),[eR.length>0?"loaded":"empty"]);let eM=(0,c.d)(),eF=(0,i.useRef)([]);(0,i.useEffect)(()=>{eF.current.length>0&&e.map(e=>e.id).sort().join(",")!==eF.current.map(e=>e.id).sort().join(",")&&(ee||ec)&&(er(!1),en(!1),eW.current=!1,eu(null),G([]),V([]),eC([]),eM({title:"Models Changed",description:"Previous evaluation state has been cleared. You can start a fresh evaluation.",status:"info",duration:3e3})),eF.current=[...e]},[e,ee,ec]);let eL=()=>eA[eT].key,eN=()=>eA[eT].baseUrl||"",eO=e=>{switch(e||eT){case"openai":default:return"https://api.openai.com/v1";case"deepseek":return"https://api.deepseek.com/v1";case"openwebui":return"http://localhost:3001/v1"}},eU=async()=>{let e=eL();if(!e)return void eM({title:"API Key Required",description:"Please enter an API key",status:"error",duration:3e3});let r=eN()||eO(),t=Date.now().toString()+"-"+Math.floor(1e3*Math.random()).toString().padStart(3,"0"),o=e.substring(0,6)+"..."+e.substring(e.length-6),i=[...eR.filter(e=>e.provider!==eT),{id:t,provider:eT,key:e,maskedKey:o,baseUrl:r}];eI(i),localStorage.setItem("storedApiConfigs",JSON.stringify(i));try{await eK(t),eM({title:"API Configuration Saved",description:"".concat(eT," API models loaded"),status:"success",duration:3e3})}catch(e){eM({title:"API Configuration Saved",description:"Configuration saved but couldn't load models. Try again.",status:"warning",duration:3e3})}},e_=e=>{let r=eR.find(r=>r.provider===e);if(r&&r.key)return r.key;let t=eA[e];return t&&t.key?t.key:null},eB=async r=>{let t=el||new AbortController;el||es(t);let o=!1,{parsedQuestions:i,trialResultsArray:n,currentModelIndex:l,currentPhase:s,currentQuestionIndex:a,currentTrialNumber:d,inconsistentQuestions:c}=r;try{for(let r=l;r<e.length;r++){let u=e[r];if(eq.current){o=!0;break}if(eW.current){er(!0),Z(!1),N(!1),en(!1),eW.current=!1,eu({parsedQuestions:i,trialResultsArray:n,currentModelIndex:r,currentPhase:s,currentQuestionIndex:a,currentTrialNumber:d,inconsistentQuestions:c}),eM({title:"Evaluation Paused",description:"You can resume from where you left off.",status:"info",duration:3e3});return}if("trial1"===s){for(let e=r===l?a:0;e<i.length;e++){if(eq.current){o=!0;break}if(eW.current){er(!0),Z(!1),N(!1),en(!1),eW.current=!1,eu({parsedQuestions:i,trialResultsArray:n,currentModelIndex:r,currentPhase:"trial1",currentQuestionIndex:e,currentTrialNumber:d,inconsistentQuestions:c}),eM({title:"Evaluation Paused",description:"You can resume from where you left off.",status:"info",duration:3e3});return}let l=i[e];try{let r=await eY(u,l.question,l.answer,$,l.id,t.signal);n[e].modelResults[u.id]?n[e].modelResults[u.id].trial1=r:n[e].modelResults[u.id]={trial1:r},ed(e=>({...e,current:e.current+1})),G([...n])}catch(t){er(!0),Z(!1),N(!1),en(!1),eW.current=!1,eu({parsedQuestions:i,trialResultsArray:n,currentModelIndex:r,currentPhase:"trial1",currentQuestionIndex:e,currentTrialNumber:d,inconsistentQuestions:c}),eM({title:"API Error - Evaluation Paused",description:"Error encountered: ".concat(t instanceof Error?t.message:"Unknown error",". Click Resume to retry."),status:"error",duration:1e4,isClosable:!0});return}}if(eq.current){o=!0;break}if(eW.current){er(!0),Z(!1),N(!1),en(!1),eW.current=!1,eu({parsedQuestions:i,trialResultsArray:n,currentModelIndex:r,currentPhase:"trial2",currentQuestionIndex:0,currentTrialNumber:d,inconsistentQuestions:c}),eM({title:"Evaluation Paused",description:"You can resume from where you left off.",status:"info",duration:3e3});return}s="trial2",a=0}if("trial2"===s){try{(await eG(u,i,$,2,t.signal)).forEach((e,r)=>{n[r].modelResults[u.id]&&(n[r].modelResults[u.id].trial2=e),ed(e=>({...e,current:e.current+1}))}),G([...n])}catch(e){er(!0),Z(!1),N(!1),en(!1),eW.current=!1,eu({parsedQuestions:i,trialResultsArray:n,currentModelIndex:r,currentPhase:"trial2",currentQuestionIndex:0,currentTrialNumber:d,inconsistentQuestions:c}),eM({title:"API Error - Evaluation Paused",description:"Error encountered: ".concat(e instanceof Error?e.message:"Unknown error",". Click Resume to retry."),status:"error",duration:1e4,isClosable:!0});return}if(eq.current){o=!0;break}if(eW.current){er(!0),Z(!1),N(!1),en(!1),eW.current=!1,eu({parsedQuestions:i,trialResultsArray:n,currentModelIndex:r,currentPhase:"trial3",currentQuestionIndex:0,currentTrialNumber:d,inconsistentQuestions:c}),eM({title:"Evaluation Paused",description:"You can resume from where you left off.",status:"info",duration:3e3});return}s="trial3",a=0}if("trial3"===s)try{(await eG(u,i,$,3,t.signal)).forEach((e,r)=>{n[r].modelResults[u.id]&&(n[r].modelResults[u.id].trial3=e),ed(e=>({...e,current:e.current+1}))}),G([...n])}catch(e){er(!0),Z(!1),N(!1),en(!1),eW.current=!1,eu({parsedQuestions:i,trialResultsArray:n,currentModelIndex:r,currentPhase:"trial3",currentQuestionIndex:0,currentTrialNumber:d,inconsistentQuestions:c}),eM({title:"API Error - Evaluation Paused",description:"Error encountered: ".concat(e instanceof Error?e.message:"Unknown error",". Click Resume to retry."),status:"error",duration:1e4,isClosable:!0});return}r<e.length-1&&(s="trial1",a=0)}if(eq.current){o=!0,Z(!1),N(!1),eo(!1),eq.current=!1,er(!1),eu(null),es(null),eM({title:"Evaluation Stopped",description:"Evaluation was stopped. Partial results are available.",status:"info",duration:3e3});return}if(c=[],n.forEach((e,r)=>{Object.entries(e.modelResults).forEach(e=>{var t,o,i;let[n,l]=e,s=[null==(t=l.trial1)?void 0:t.answer,null==(o=l.trial2)?void 0:o.answer,null==(i=l.trial3)?void 0:i.answer].filter(Boolean);new Set(s).size>1&&(l.isInconsistent=!0,c.push({index:r,modelId:n}))})}),c.length>0){let r=new Map;for(let{index:e,modelId:t}of c)r.has(t)||r.set(t,[]),r.get(t).push({index:e,question:i[e]});let l=Array.from(r.values()).reduce((e,r)=>e+7*Math.ceil(r.length/10),0);for(let[s,a]of(ed(e=>({...e,total:e.total+l})),Array.from(r.entries()))){let r=e.find(e=>e.id===s);if(r){for(let l=4;l<=10;l++){if(eq.current){o=!0;break}if(eW.current){er(!0),Z(!1),N(!1),en(!1),eW.current=!1,eu({parsedQuestions:i,trialResultsArray:n,currentModelIndex:e.length,currentPhase:"inconsistent",currentQuestionIndex:0,currentTrialNumber:l,inconsistentQuestions:c}),eM({title:"Evaluation Paused",description:"You can resume from where you left off.",status:"info",duration:3e3});return}try{(await eG(r,a.map(e=>e.question),$,l,t.signal)).forEach((e,r)=>{let t=a[r].index;n[t].modelResults[s].additionalTrials||(n[t].modelResults[s].additionalTrials=[]),n[t].modelResults[s].additionalTrials.push(e)}),ed(e=>({...e,current:e.current+1})),G([...n])}catch(r){er(!0),Z(!1),N(!1),en(!1),eW.current=!1,eu({parsedQuestions:i,trialResultsArray:n,currentModelIndex:e.length,currentPhase:"inconsistent",currentQuestionIndex:0,currentTrialNumber:l,inconsistentQuestions:c}),eM({title:"API Error - Evaluation Paused",description:"Error encountered: ".concat(r instanceof Error?r.message:"Unknown error",". Click Resume to retry."),status:"error",duration:1e4,isClosable:!0});return}}if(eq.current){o=!0;break}for(let{index:e}of a){let r=n[e].modelResults[s],t=[r.trial1,r.trial2,r.trial3,...r.additionalTrials||[]].filter(Boolean).filter(e=>!e.aborted);t.length>0&&(r.correctPercentage=t.filter(e=>e.correct).length/t.length*100)}}}G([...n])}G(n),setTimeout(()=>{var e;null==(e=document.getElementById("evaluation"))||e.scrollIntoView({behavior:"smooth"})},0),o||t.signal.aborted||eM({title:"Trial evaluation completed",description:"Processed ".concat(i.length," questions with ").concat(e.length," models. Found ").concat(c.length," inconsistent responses."),status:"success",duration:5e3}),Z(!1),N(!1),eo(!1),en(!1),eq.current=!1,eW.current=!1,er(!1),eu(null),es(null)}catch(e){Z(!1),N(!1),eo(!1),en(!1),eq.current=!1,eW.current=!1,er(!1),eu(null),es(null),eM({title:"Evaluation failed",description:"There was an error during evaluation processing. Please check the console for details.",status:"error",duration:5e3})}},e$=()=>{if(0===Y.length)return void eM({title:"No Data to Export",description:"Please run an evaluation first.",status:"warning",duration:3e3});try{let r="";if(eP){let t=Array.from(new Set(Y.map(e=>e.class).filter(Boolean))).sort(),o=["Model"];t.forEach(e=>{o.push("".concat(e," - T1"),"".concat(e," - T2"),"".concat(e," - T3"),"".concat(e," - Avg"))}),o.push("Overall Avg"),r+=o.map(e=>'"'.concat(e,'"')).join(",")+"\n",e.forEach(e=>{let o=[e.name],i=0;t.forEach(r=>{let t=0,n=0,l=0,s=0;if(Y.forEach(o=>{if(o.class===r){let r=o.modelResults[e.id];if(r){var i,a,d;s++,(null==(i=r.trial1)?void 0:i.correct)&&t++,(null==(a=r.trial2)?void 0:a.correct)&&n++,(null==(d=r.trial3)?void 0:d.correct)&&l++}}}),s>0){let e=(t/s*100).toFixed(1),r=(n/s*100).toFixed(1),a=(l/s*100).toFixed(1),d=((parseFloat(e)+parseFloat(r)+parseFloat(a))/3).toFixed(1);o.push("".concat(e,"%"),"".concat(r,"%"),"".concat(a,"%"),"".concat(d,"%")),i+=parseFloat(d)}else o.push("-","-","-","-")});let n=(i/t.length).toFixed(1);o.push("".concat(n,"%")),r+=o.map(e=>'"'.concat(e,'"')).join(",")+"\n"})}else r+="Model,Trial 1,Trial 2,Trial 3,Average\n",e.forEach(e=>{let t=0,o=0,i=0,n=0;Y.forEach(r=>{let l=r.modelResults[e.id];if(l){var s,a,d;n++,(null==(s=l.trial1)?void 0:s.correct)&&t++,(null==(a=l.trial2)?void 0:a.correct)&&o++,(null==(d=l.trial3)?void 0:d.correct)&&i++}});let l=n>0?(t/n*100).toFixed(1):"0.0",s=n>0?(o/n*100).toFixed(1):"0.0",a=n>0?(i/n*100).toFixed(1):"0.0",d=((parseFloat(l)+parseFloat(s)+parseFloat(a))/3).toFixed(1);r+='"'.concat(e.name,'",').concat(l,"%,").concat(s,"%,").concat(a,"%,").concat(d,"%\n")});let t=new Blob([r],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),i=URL.createObjectURL(t);o.setAttribute("href",i),o.setAttribute("download","accuracy_table_".concat(new Date().toISOString().slice(0,10),".csv")),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),eM({title:"Table Exported Successfully",status:"success",duration:3e3})}catch(e){eM({title:"Export Failed",description:"An error occurred while exporting the table.",status:"error",duration:5e3})}},eQ=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"png";try{let r=document.getElementById("chart-container");if(!r)return void eM({title:"Export Failed",description:"Chart not found.",status:"error",duration:3e3});let t=r.querySelector("canvas");if(t){if("png"===e)t.toBlob(e=>{if(e){let r=URL.createObjectURL(e),t=document.createElement("a");t.setAttribute("href",r),t.setAttribute("download","chart_".concat(eb,"_").concat(new Date().toISOString().slice(0,10),".png")),t.click(),URL.revokeObjectURL(r),eM({title:"Chart Exported as PNG",status:"success",duration:3e3})}else eM({title:"Export Failed",description:"Could not create PNG from chart.",status:"error",duration:3e3})});else if("svg"===e){let e=t.width,r=t.height,o=t.toDataURL("image/png"),i='<?xml version="1.0" encoding="UTF-8"?>\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'.concat(e,'" height="').concat(r,'" viewBox="0 0 ').concat(e," ").concat(r,'">\n  <image width="').concat(e,'" height="').concat(r,'" xlink:href="').concat(o,'"/>\n</svg>'),n=new Blob([i],{type:"image/svg+xml;charset=utf-8"}),l=URL.createObjectURL(n),s=document.createElement("a");s.setAttribute("href",l),s.setAttribute("download","chart_".concat(eb,"_").concat(new Date().toISOString().slice(0,10),".svg")),s.click(),URL.revokeObjectURL(l),eM({title:"Chart Exported as SVG",status:"success",duration:3e3})}}else eM({title:"Export Failed",description:"Chart canvas not found. Please ensure a chart is displayed.",status:"warning",duration:3e3})}catch(e){eM({title:"Export Failed",description:"An error occurred while exporting the chart.",status:"error",duration:5e3})}},eJ=async()=>{if(eo(!1),!O)return void eM({title:"File Required",description:"Please select a CSV file with questions to evaluate.",status:"warning",duration:3e3});if(0===e.length)return void eM({title:"Models Required",description:"Please select at least one model for evaluation.",status:"warning",duration:3e3});let{invalidModels:r,providersWithIssues:t}=(()=>{let r=[],t=new Set;for(let o of e){let e=e_(o.provider);e&&0!==e.trim().length||(r.push({name:o.name,provider:o.provider}),t.add(o.provider))}return t.has("deepseek"),{invalidModels:r,providersWithIssues:t}})();if(r.length>0){let e=r.map(e=>"".concat(e.provider,"/").concat(e.name)).join(", "),o=Array.from(t).map(e=>"openai"===e?"OpenAI: Add your API key in the sidebar":"deepseek"===e?"DeepSeek: Get an API key from deepseek.com and add it in the sidebar":"openwebui"===e?"OpenWebUI: Ensure your local API is running and configured":"".concat(e,": Add your API key in the sidebar")).join("\n• ");eM({title:"API Configuration Missing",description:"The following models are missing API keys: ".concat(e,".\n\nTo fix this:\n• ").concat(o),status:"error",duration:8e3,isClosable:!0});return}try{let r=new FileReader;r.onload=async r=>{try{var t,o,i,n;let l=new AbortController;es(l),N(!0),Z(!0),en(!1),eW.current=!1,eq.current=!1,setTimeout(()=>{},100),ed({current:0,total:3*_*e.length}),V([]),G([]),eC([]),eD(!1);let s=(null==(t=r.target)?void 0:t.result).replace(/\r\n/g,"\n").split("\n").filter(e=>e.trim());if(s.length<=1){eM({title:"Invalid CSV file",description:"The CSV file appears to be empty or only contains headers.",status:"error",duration:3e3}),Z(!1),N(!1);return}let a=s[0],d=[],c="",u=!1;for(let e=0;e<a.length;e++){let r=a[e];'"'===r?u=!u:","!==r||u?c+=r:(d.push(c.trim().toLowerCase()),c="")}d.push(c.trim().toLowerCase());let h=d.findIndex(e=>"class"===e||"category"===e||"catogory"===e||"group"===e||"step"===e);eD(-1!==h);let p=d.findIndex(e=>e.includes("id")),g=d.findIndex(e=>e.includes("question")),x=d.findIndex(e=>e.includes("correct answer")||e.includes("correct_answer")||e.includes("correctanswer")||e.includes("correct")&&e.includes("answer"));if(d.length>=5){let e=d.findIndex(e=>"from"===e),r=d.findIndex(e=>e.includes("len"));0===e&&1===p&&2===g&&3===r&&4===x||-1===p&&(null==(o=d[1])?void 0:o.toLowerCase())==="id"&&(p=1),-1===g&&(null==(i=d[2])?void 0:i.toLowerCase())==="question"&&(g=2),-1===x&&(null==(n=d[4])?void 0:n.toLowerCase().includes("correct"))&&(x=4)}let m=[];if(-1===p&&m.push("ID"),-1===g&&m.push("Question"),-1===x&&m.push("Correct"),m.length>0){let e=m.join(", ");eM({title:"Invalid CSV format",description:"Could not identify required column(s): ".concat(e,". Please check your CSV format."),status:"error",duration:5e3}),Z(!1),N(!1);return}let f=s.slice(1),b=[];for(let e=0;e<f.length;e++)try{let r=[],t="",o=!1;for(let i=0;i<f[e].length;i++){let n=f[e][i];'"'===n?o=!o:","!==n||o?t+=n:(r.push(t.trim()),t="")}r.push(t.trim());let i=Math.max(-1===h?-1:h,p,g,x);if(r.length>i){let e={id:r[p].trim(),question:r[g].trim(),answer:r[x].trim().toUpperCase()};-1!==h&&r[h]&&(e.class=r[h].trim()),b.push(e)}}catch(e){}let j=b.map(e=>({questionId:e.id,question:e.question,class:e.class,length:e.question.length,correctAnswer:e.answer,modelResults:{}}));G([...j]),await eB({parsedQuestions:b,trialResultsArray:j,currentModelIndex:0,currentPhase:"trial1",currentQuestionIndex:0,currentTrialNumber:0,inconsistentQuestions:[]})}catch(e){Z(!1),N(!1),eo(!1),en(!1),eq.current=!1,eW.current=!1,er(!1),eu(null),es(null),eM({title:"Evaluation failed",description:"There was an error during evaluation processing. Please check the console for details.",status:"error",duration:5e3})}},r.readAsText(O)}catch(e){Z(!1),N(!1),eo(!1),en(!1),eq.current=!1,eW.current=!1,er(!1),eu(null),es(null),eM({title:"Evaluation failed",description:"There was an error during evaluation. Please check the console for details.",status:"error",duration:5e3})}},eV=(e,r,t)=>"".concat(e,"/chat/completions"),eY=async(e,r,t,o,i,n)=>{let l=Date.now();try{var s,a,d;let c=eR.find(r=>r.provider===e.provider);if(!c||!c.key){let r="No API configuration for ".concat(e.provider,". Please add API key first.");throw Error(r)}let u=e.apiModelId||e.id,h=/^(o1|o3)(-mini|-preview)?(-\d{4}-\d{2}-\d{2})?$/i.test(u),p={model:u};h?p.messages=[{role:"user",content:"".concat(o,"\n\n").concat(r)}]:(p.messages=[{role:"system",content:o},{role:"user",content:r}],p.temperature=M),e.reasoningEffort&&"openai"===e.provider&&(p.reasoning_effort=e.reasoningEffort);let g=eV(c.baseUrl||"https://api.openai.com/v1",u,e.provider),x=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:g,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.key)},requestBody:p}),signal:n||AbortSignal.timeout(6e5)});if(!x.ok){let o=await x.json().catch(()=>({})),n="API request failed: ".concat(x.statusText," - ").concat(JSON.stringify(o));throw eC(o=>[...o,{timestamp:Date.now(),provider:e.provider,model:e.name,request:p,error:n,duration:Date.now()-l,question:r,questionId:i,correctAnswer:t,temperature:M,promptTokens:0,completionTokens:0,totalTokens:0,showFullRequest:!1}]),Error(n)}let m=await x.json(),f=m.choices[0].message.content||"",b=f.trim(),j=(b=b.replace(/^\s*\d+[.)\-:]\s*/g,"")).trim().toUpperCase(),v=Date.now()-l;if(!j||0===j.length)return eC(o=>[...o,{timestamp:Date.now(),provider:e.provider,model:e.name,request:p,error:'Empty response: No valid answer found in model response. Raw response: "'.concat(f,'"'),duration:v,question:r,questionId:i,correctAnswer:t,temperature:M,promptTokens:0,completionTokens:0,totalTokens:0,showFullRequest:!1}]),{answer:"ERROR",correct:!1,tokens:0,time:v};let w=(null==(s=m.usage)?void 0:s.total_tokens)||W(o+r+j),y=(null==(a=m.usage)?void 0:a.prompt_tokens)||0,S=(null==(d=m.usage)?void 0:d.completion_tokens)||0;return eC(o=>[...o,{timestamp:Date.now(),provider:e.provider,model:e.name,request:p,response:{answer:j,correct:j===t.toUpperCase(),rawResponse:m},duration:v,question:r,questionId:i,correctAnswer:t,temperature:M,promptTokens:y,completionTokens:S,totalTokens:w,showFullRequest:!1}]),{answer:j,correct:j===t.toUpperCase(),tokens:w,time:v}}catch(s){let o=Date.now()-l;if(s instanceof Error&&"AbortError"===s.name)return{answer:"",correct:!1,tokens:0,time:0,aborted:!0};let n=s instanceof Error?s.message:String(s);throw eC(l=>[...l,{timestamp:Date.now(),provider:e.provider,model:e.name,request:{question:r,temperature:M},response:"API Error: ".concat(n),error:n,duration:o,question:r,questionId:i,correctAnswer:t,temperature:M,promptTokens:0,completionTokens:0,totalTokens:0,showFullRequest:!1}]),s}},eG=async(e,r,t,o,i)=>{let n=[];for(let o=0;o<r.length&&!et;o+=10){let d=r.slice(o,Math.min(o+10,r.length)),c=Date.now();try{var l,s,a;let r,o=eR.find(r=>r.provider===e.provider);if(!o||!o.key){let r="No API configuration for ".concat(e.provider,". Please add API key first.");throw Error(r)}let u=d.map((e,r)=>"Question ".concat(r+1,": ").concat(e.question)).join("\n\n"),h=e.apiModelId||e.id,p=/^(o1|o3)(-mini|-preview)?(-\d{4}-\d{2}-\d{2})?$/i.test(h),g={model:h};p?g.messages=[{role:"user",content:"".concat(t,"\n\n").concat(u)}]:(g.messages=[{role:"system",content:t},{role:"user",content:u}],"deepseek"!==e.provider&&(g.temperature=M)),e.reasoningEffort&&"openai"===e.provider&&(g.reasoning_effort=e.reasoningEffort),console.log("[Request Body] ".concat(JSON.stringify(g).substring(0,500),"..."));let x=eV(o.baseUrl||"https://api.openai.com/v1",h,e.provider);console.log("[API Call] Provider: ".concat(e.provider,", Endpoint: ").concat(x,", Model: ").concat(h));try{r=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:x,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.key)},requestBody:g}),signal:i||AbortSignal.timeout(6e5)})}catch(t){let r="Fetch error: ".concat(t instanceof Error?t.message:String(t));throw console.error("[API Error] ".concat(r),t),eC(t=>[...t,{timestamp:Date.now(),provider:e.provider,model:e.name,request:g,error:r,duration:Date.now()-c,question:"Batch of ".concat(d.length," questions"),questionId:d.map(e=>e.id).join(", "),temperature:M,promptTokens:0,completionTokens:0,totalTokens:0,showFullRequest:!1}]),Error(r)}if(console.log("[API Response] Status: ".concat(r.status," ").concat(r.statusText)),!r.ok){let t=await r.json().catch(()=>({})),o="API request failed: ".concat(r.statusText," - ").concat(JSON.stringify(t));throw eC(r=>[...r,{timestamp:Date.now(),provider:e.provider,model:e.name,request:g,error:o,duration:Date.now()-c,question:"Batch of ".concat(d.length," questions"),questionId:d.map(e=>e.id).join(", "),temperature:M,promptTokens:0,completionTokens:0,totalTokens:0,showFullRequest:!1}]),Error(o)}let m=await r.json(),f=(m.choices[0].message.content||"").trim(),b=Date.now()-c,j=(null==(l=m.usage)?void 0:l.total_tokens)||W(t+u+f),v=(null==(s=m.usage)?void 0:s.prompt_tokens)||0,w=(null==(a=m.usage)?void 0:a.completion_tokens)||0,y=eX(f,d.length);eC(r=>[...r,{timestamp:Date.now(),provider:e.provider,model:e.name,request:g,response:{answers:y,rawResponse:m},duration:b,question:"Batch of ".concat(d.length," questions"),questionId:d.map(e=>e.id).join(", "),temperature:M,promptTokens:v,completionTokens:w,totalTokens:j,showFullRequest:!1}]);let S=y.filter(e=>"ERROR"===e).length;if(S/d.length>.5)throw Error("Response parsing failed: ".concat(S,"/").concat(d.length,' answers could not be parsed from model response. Raw response: "').concat(f,'"'));d.forEach((e,r)=>{n.push({answer:y[r]||"ERROR",correct:(y[r]||"").toUpperCase()===e.answer.toUpperCase(),tokens:Math.floor(j/d.length),time:Math.floor(b/d.length)})})}catch(t){let r=Date.now()-c;if(t instanceof Error&&"AbortError"===t.name)d.forEach(()=>{n.push({answer:"",correct:!1,tokens:0,time:0,aborted:!0})});else{let o=t instanceof Error?t.message:String(t),i=d.map(e=>e.question).join("; ");throw eC(t=>[...t,{timestamp:Date.now(),provider:e.provider,model:e.name,request:{batchQuestions:i,temperature:M},response:"API Error: ".concat(o),error:o,duration:r,question:"Batch of ".concat(d.length," questions: ").concat(i),questionId:d.map(e=>e.id).join(","),correctAnswer:d.map(e=>e.answer).join(","),temperature:M,promptTokens:0,completionTokens:0,totalTokens:0,showFullRequest:!1}]),t}}}return n},eX=(e,r)=>{let t=[],o=Array.from(e.matchAll(/(?:^|\n)\s*(\d+)\.\s*(?:\()?([A-Za-z])(?:\))?/gim));if(o.length>=r&&(o.slice(0,r).forEach((e,r)=>{let o=e[2].toUpperCase();t.push(o),/^[A-D]$/.test(o)}),t.length===r))return t;for(let o of e.split("\n")){if(t.length>=r)break;let e=o.match(/^\s*\d+[.):]\s*(?:\()?([A-D])\)?/i);e&&t.push(e[1].toUpperCase())}if(t.length>=r)return t.slice(0,r);for(let{regex:o,name:i}of[{regex:/(?:^|\n)\s*\d+\)\s*([A-D])\b/gim,name:"Number paren Letter (1) A)"},{regex:/Question\s+\d+:\s*([A-D])\b/gim,name:"Question N: Letter"},{regex:/Answer\s+\d+:\s*([A-D])\b/gim,name:"Answer N: Letter"},{regex:/\d+\.\s*Answer:\s*([A-D])\b/gim,name:"N. Answer: Letter"},{regex:/\d+\)\s*Answer:\s*([A-D])\b/gim,name:"N) Answer: Letter"}]){let i=e.match(o);if(i&&i.length>=r){if(i.slice(0,r).forEach(e=>{var r;let o=null==(r=e.match(/([A-D])/i))?void 0:r[1];o&&t.push(o.toUpperCase())}),t.length===r)return t;t.length=0}}let i=e.match(/\b([A-D])\b/gi);if(i&&i.length>=r)return i.slice(0,r).map(e=>e.toUpperCase());let n=e.match(/([A-D])/gi);return n&&n.length>=r?n.slice(0,r).map(e=>e.toUpperCase()):Array(r).fill("ERROR")},eH=async e=>{var r;let t=null==(r=e.target.files)?void 0:r[0];if(!t)return;(ee||ec)&&(er(!1),en(!1),eW.current=!1,eu(null),G([]),V([]),eC([]),eM({title:"New File Loaded",description:"Previous evaluation state has been cleared. You can start a fresh evaluation.",status:"info",duration:3e3})),U(t);let o=new FileReader;o.onload=e=>{var r,t,o,i,n,l;let s=(null==(r=e.target)?void 0:r.result).replace(/\r\n/g,"\n").split("\n").filter(e=>e.trim().length>0);if(s.length>0){let e=s[0],r=[],a="",d=!1;for(let t=0;t<e.length;t++){let o=e[t];'"'===o?d=!d:","!==o||d?a+=o:(r.push(a.trim().toLowerCase()),a="")}r.push(a.trim().toLowerCase());let c=r.some(e=>e.includes("id")),u=r.some(e=>e.includes("question")),h=r.some(e=>e.includes("correct answer")||e.includes("correct_answer")||e.includes("correctanswer")||e.includes("correct")&&e.includes("answer"));r.length>=5&&(null==(t=r[0])?void 0:t.toLowerCase())==="from"&&(null==(o=r[1])?void 0:o.toLowerCase())==="id"&&(null==(i=r[2])?void 0:i.toLowerCase())==="question"&&(null==(n=r[3])?void 0:n.toLowerCase().includes("len"))&&(null==(l=r[4])?void 0:l.toLowerCase().includes("correct"))&&(c=!0,u=!0,h=!0);let p=[];if(c||p.push("ID"),u||p.push("Question"),h||p.push("Correct"),p.length>0){let e=p.join(", ");eM({title:"Missing required columns",description:"CSV is missing: ".concat(e,". Required columns: ID, Question, and Correct. Optional: Class/Category/Group/Step."),status:"warning",duration:5e3})}else{let e=r.some(e=>"class"===e||"category"===e||"catogory"===e||"group"===e||"step"===e);eD(e),eM({title:"CSV file loaded",description:"Successfully loaded CSV with ".concat(s.length-1," questions").concat(e?" (with classification)":""),status:"success",duration:3e3})}}B(s.length-1)},o.readAsText(t)},eK=async e=>{H(!0);try{let r=[],t=0,o=[];if(e){let r=eR.find(r=>r.id===e);if(r)o=[r];else{let e=eR.filter(e=>e.provider===eT);if(e.length>0)o=[e[0]];else{let e=eL();if(!e)throw Error("Please enter an API key");o=[{id:"temp-"+Date.now(),provider:eT,key:e,maskedKey:e.substring(0,6)+"..."+e.substring(e.length-6),baseUrl:eN()}]}}}else if(eR.length>0)o=eR;else{let e=eL();if(!e)throw Error("Please enter an API key");o=[{id:"temp",provider:eT,key:e,maskedKey:e.substring(0,6)+"..."+e.substring(e.length-6),baseUrl:eN()}]}for(let e of o){let o=e.key,i=e.baseUrl||eO(e.provider),n=e.provider;try{let e=new AbortController,l=setTimeout(()=>e.abort(),18e4);try{let l="".concat(i,"/models");console.log("[Models Fetch] Provider: ".concat(n,", Endpoint: ").concat(l));let s=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:l,method:"GET",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json"}}),signal:e.signal});if(!s.ok){if(401===s.status){let e="Authentication failed (401) for ".concat(n,": Invalid or expired API key");console.error("[Models Fetch Error] ".concat(e)),eM({title:"".concat(n," Authentication Error"),description:"Invalid or expired API key. Please update your ".concat(n," API key."),status:"error",duration:5e3,isClosable:!0})}else try{let e=await s.text();console.error("[Models Fetch Error] Status ".concat(s.status,": ").concat(e))}catch(e){}throw Error("API returned status ".concat(s.status))}let a=await s.json(),d=[],c=a.data||a.models||a||[],u=Array.isArray(c)?c:[];if(0===u.length&&"deepseek"===n)throw Error("No models returned from DeepSeek API");u.forEach(e=>{let r=e.id.toLowerCase().includes(n.toLowerCase())?"provider-".concat(n,"-").concat(e.id):"".concat(n,"-").concat(e.id),t=/^gpt-5(-\d{4}-\d{2}-\d{2})?$/i.test(e.id),o=/^gpt-5-(mini|nano)(-\d{4}-\d{2}-\d{2})?$/i.test(e.id),i=/^(o1|o3|o3-mini|o4-mini)(-\d{4}-\d{2}-\d{2})?$/i.test(e.id);"openai"===n?t?[{effort:"minimal",suffix:" (Minimal reasoning)"},{effort:"low",suffix:" (Low reasoning)"},{effort:"medium",suffix:" (Medium reasoning - Default)"},{effort:"high",suffix:" (High reasoning)"}].forEach(t=>{let{effort:o,suffix:i}=t;d.push({id:"".concat(r,"-").concat(o),name:"".concat(e.id).concat(i),provider:n,apiModelId:e.id,reasoningEffort:o})}):o?[{effort:"minimal",suffix:" (Minimal reasoning)"},{effort:"low",suffix:" (Low reasoning)"},{effort:"medium",suffix:" (Medium reasoning - Default)"},{effort:"high",suffix:" (High reasoning)"}].forEach(t=>{let{effort:o,suffix:i}=t;d.push({id:"".concat(r,"-").concat(o),name:"".concat(e.id).concat(i),provider:n,apiModelId:e.id,reasoningEffort:o})}):i?[{effort:"low",suffix:" (Low reasoning)"},{effort:"medium",suffix:" (Medium reasoning - Default)"},{effort:"high",suffix:" (High reasoning)"}].forEach(t=>{let{effort:o,suffix:i}=t;d.push({id:"".concat(r,"-").concat(o),name:"".concat(e.id).concat(i),provider:n,apiModelId:e.id,reasoningEffort:o})}):d.push({id:r,name:e.id,provider:n,apiModelId:e.id}):d.push({id:r,name:e.id,provider:n,apiModelId:e.id})}),r=[...r,...d],t+=d.length}finally{clearTimeout(l)}}catch(e){if(e instanceof Error&&"AbortError"===e.name&&eM({title:"Connection Timeout",description:"Connection to ".concat(n," API timed out. Please check your network or try again later."),status:"error",duration:5e3,isClosable:!0}),"deepseek"===n){console.log("DeepSeek API fetch failed, using default models");let e=[{id:"deepseek-chat",name:"DeepSeek Chat"},{id:"deepseek-reasoner",name:"DeepSeek Reasoner"}];e.forEach(e=>{r.push({id:"deepseek-".concat(e.id),name:e.name,provider:"deepseek",apiModelId:e.id})}),t+=e.length,eM({title:"Using Default DeepSeek Models",description:"Could not fetch models from API. Using default DeepSeek models instead.",status:"info",duration:3e3,isClosable:!0})}}}l(t=>{let i;if(e){let o=eR.find(r=>r.id===e);if(o)i=[...t.filter(e=>e.provider!==o.provider),...r];else{let e=new Set(t.map(e=>e.id)),o=r.filter(r=>!e.has(r.id));i=[...t,...o]}}else if(eR.length>0&&o.length===eR.length)i=r;else{let e=new Set(o.map(e=>e.provider)),n=t.filter(r=>!e.has(r.provider)),l=new Set(n.map(e=>e.id)),s=r.filter(e=>!l.has(e.id));i=[...n,...s]}let n=q(i);return localStorage.setItem("availableModels",JSON.stringify(n)),n}),r.length,eM({title:"Models loaded",description:"".concat(t," models available from ").concat(o.length," API configuration(s)"),status:"success",duration:3e3,isClosable:!0})}catch(e){eM({title:"Error loading models",description:e instanceof Error?e.message:"Please check your API configurations",status:"error",duration:3e3,isClosable:!0})}finally{H(!1)}};return(0,o.jsxs)(u.s,{h:"100vh",children:[L&&(0,o.jsxs)(h.a,{position:"fixed",top:"0",left:"0",right:"0",bg:"blue.500",color:"white",py:2,px:6,zIndex:"1000",display:"flex",alignItems:"center",justifyContent:"center",children:[(0,o.jsx)(h.a,{as:"span",mr:3,display:"inline-block",position:"relative",width:"16px",height:"16px",children:(0,o.jsx)(h.a,{position:"absolute",top:"0",left:"0",width:"16px",height:"16px",borderRadius:"full",border:"2px solid",borderColor:"white",borderTopColor:"transparent",animation:"spin 1s linear infinite",sx:{"@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}})}),(0,o.jsx)(p.E,{fontWeight:"medium",children:"Processing request... This may take a few moments"})]}),(0,o.jsx)(h.a,{w:"280px",bg:"blue.50",p:6,borderRight:"1px",borderColor:"blue.100",position:"fixed",h:"100vh",left:0,top:0,zIndex:1e3,children:(0,o.jsxs)(g.T,{spacing:6,align:"stretch",children:[(0,o.jsxs)(h.a,{mb:5,children:[(0,o.jsx)(x.D,{size:"md",color:"blue.700",mb:1,children:"LLM Evaluation"}),(0,o.jsx)(p.E,{fontSize:"sm",color:"blue.600",children:"Accuracy vs Consistency"})]}),(0,o.jsx)(g.T,{spacing:2,align:"stretch",children:[{id:"models",title:"1. Add Models",icon:"\uD83E\uDD16"},{id:"database",title:"2. MCQ Database",icon:"\uD83D\uDCDD"},{id:"config",title:"3. Configuration",icon:"⚙️"},{id:"evaluation",title:"4. Evaluation",icon:"\uD83D\uDCCA"}].map(e=>(0,o.jsx)(m.$,{variant:"ghost",justifyContent:"flex-start",py:3,pl:4,leftIcon:(0,o.jsx)(h.a,{p:1,bg:"blue.100",borderRadius:"md",children:(0,o.jsx)(p.E,{fontSize:"sm",children:e.icon})}),onClick:()=>{setTimeout(()=>{let r=document.getElementById(e.id);null==r||r.scrollIntoView({behavior:"smooth"})},0)},_hover:{bg:"blue.100"},color:"blue.700",fontSize:"sm",fontWeight:"medium",children:e.title},e.id))}),(0,o.jsx)(h.a,{mt:"auto",pt:7,borderTop:"1px",borderColor:"blue.100",className:"api-config-section",children:(0,o.jsxs)(g.T,{spacing:2,align:"stretch",children:[(0,o.jsx)(p.E,{fontSize:"s",fontWeight:"600",color:"blue.700",mb:1,children:"Load API Models"}),(0,o.jsxs)(f.MJ,{size:"sm",children:[(0,o.jsx)(b.l,{fontSize:"xs",mb:.5,fontWeight:"600",children:"Provider"}),(0,o.jsxs)(j.l,{size:"xs",value:eT,onChange:e=>ek(e.target.value),children:[(0,o.jsx)("option",{value:"openai",children:"OpenAI"}),(0,o.jsx)("option",{value:"deepseek",children:"DeepSeek"}),(0,o.jsx)("option",{value:"openwebui",children:"OpenWebUI"})]})]}),(0,o.jsxs)(f.MJ,{size:"sm",children:[(0,o.jsx)(b.l,{fontSize:"xs",mb:.5,fontWeight:"600",children:"API Key"}),(0,o.jsx)(v.p,{size:"xs",type:"password",value:eL(),onChange:e=>{var r;return r=e.target.value,void ez(e=>({...e,[eT]:{...e[eT],key:r}}))},placeholder:"Enter API key"})]}),(0,o.jsxs)(f.MJ,{size:"sm",mb:3,children:[(0,o.jsx)(b.l,{fontSize:"xs",mb:.5,fontWeight:"600",children:"Base URL (Optional)"}),(0,o.jsx)(v.p,{size:"xs",value:eN(),onChange:e=>{var r;return r=e.target.value,void ez(e=>({...e,[eT]:{...e[eT],baseUrl:r}}))},placeholder:eO()})]}),(0,o.jsx)(m.$,{size:"xs",colorScheme:"blue",onClick:eU,isLoading:X,mb:3,children:"Load API Models"}),(0,o.jsxs)(h.a,{mt:2,children:[(0,o.jsxs)(w.z,{justify:"space-between",align:"center",children:[(0,o.jsx)(p.E,{fontSize:"xs",fontWeight:"bold",color:"blue.700",mb:2,children:"Saved Configurations"}),(0,o.jsxs)(w.z,{spacing:1,children:[eR.length>0&&(0,o.jsx)(m.$,{size:"xs",variant:"ghost",colorScheme:"blue",onClick:()=>eK(),title:"Refresh API models",isLoading:X,p:1,minW:"auto",h:"auto",children:"\uD83D\uDD04"}),(0,o.jsxs)(p.E,{fontSize:"xs",color:"blue.500",fontWeight:"medium",children:[eR.length," ",1===eR.length?"config":"configs"]})]})]}),0===eR.length?(0,o.jsx)(h.a,{bg:"yellow.50",p:3,borderRadius:"md",textAlign:"center",borderWidth:"1px",borderStyle:"dashed",borderColor:"yellow.200",children:(0,o.jsxs)(g.T,{spacing:1,children:[(0,o.jsx)(p.E,{fontSize:"xs",color:"yellow.700",fontWeight:"medium",children:"No API configurations saved yet"}),(0,o.jsx)(p.E,{fontSize:"10px",color:"gray.600",children:'Enter your API key above and click "Load API Models"'}),(0,o.jsxs)(w.z,{spacing:0,fontSize:"10px",color:"gray.500",children:[(0,o.jsx)(p.E,{children:"Supported providers:"}),(0,o.jsx)(p.E,{fontWeight:"medium",color:"blue.600",ml:1,children:"OpenAI"}),(0,o.jsx)(p.E,{mx:1,children:"•"}),(0,o.jsx)(p.E,{fontWeight:"medium",color:"blue.600",children:"DeepSeek"}),(0,o.jsx)(p.E,{mx:1,children:"•"}),(0,o.jsx)(p.E,{fontWeight:"medium",color:"blue.600",children:"OpenWebUI"})]})]})}):(0,o.jsx)(g.T,{spacing:1.5,align:"stretch",children:eR.map(e=>(0,o.jsxs)(h.a,{bg:"blue.50",borderRadius:"md",fontSize:"xs",py:1.5,px:2,position:"relative",pr:7,borderWidth:"1px",fontWeight:"medium",borderColor:"blue.200",_hover:{borderColor:"blue.300",bg:"blue.75"},children:[(0,o.jsxs)(w.z,{spacing:2,align:"flex-start",children:[(0,o.jsx)(h.a,{w:"8px",h:"8px",borderRadius:"full",bg:t.some(r=>r.provider===e.provider)?"green.400":"yellow.400",mt:"6px"}),(0,o.jsxs)(g.T,{spacing:.5,align:"flex-start",children:[(0,o.jsxs)(p.E,{fontWeight:"bold",color:"blue.700",children:["openai"===e.provider?"OpenAI":"deepseek"===e.provider?"DeepSeek":"openwebui"===e.provider?"Open WebUI":e.provider,(0,o.jsxs)(p.E,{as:"span",ml:1,fontSize:"10px",color:"gray.500",children:["(",t.filter(r=>r.provider===e.provider).length||0," models)"]})]}),(0,o.jsxs)(w.z,{children:[(0,o.jsx)(p.E,{color:"gray.600",fontSize:"10px",noOfLines:1,isTruncated:!0,children:e.maskedKey}),(0,o.jsx)(p.E,{as:"span",fontSize:"10px",color:"gray.500",children:e.baseUrl&&e.baseUrl!==eO(e.provider)?"(custom URL)":""})]})]})]}),(0,o.jsxs)(w.z,{spacing:1,position:"absolute",right:1,top:"8px",children:[(0,o.jsx)(m.$,{size:"xs",variant:"unstyled",color:"blue.600",fontSize:"10px",onClick:()=>eK(e.id),title:"Refresh models",width:"20px",height:"20px",minWidth:"0",p:0,display:"flex",alignItems:"center",justifyContent:"center",_hover:{color:"green.500"},children:"\uD83D\uDD04"}),(0,o.jsx)(m.$,{size:"xs",variant:"unstyled",color:"blue.600",fontSize:"10px",onClick:()=>(e=>{let t=eR.find(r=>r.id===e);if(!t)return;let o=eR.filter(r=>r.id!==e);eI(o),localStorage.setItem("storedApiConfigs",JSON.stringify(o)),l(e=>{let r=e.filter(e=>e.provider!==t.provider);return localStorage.setItem("availableModels",JSON.stringify(r)),r}),r(e=>e.filter(e=>e.provider!==t.provider)),eM({title:"API Configuration Removed",description:"".concat("openai"===t.provider?"OpenAI":"deepseek"===t.provider?"DeepSeek":"openwebui"===t.provider?"Open WebUI":t.provider," configuration and models removed"),status:"info",duration:3e3})})(e.id),title:"Remove configuration",width:"20px",height:"20px",minWidth:"0",p:0,display:"flex",alignItems:"center",justifyContent:"center",_hover:{color:"red.500"},children:"✕"})]})]},e.id))})]})]})})]})}),(0,o.jsx)(h.a,{ml:"280px",flex:1,py:8,children:(0,o.jsx)(h.a,{maxW:"1200px",mx:"auto",px:8,children:(0,o.jsxs)(g.T,{spacing:6,align:"stretch",children:[(0,o.jsxs)(h.a,{id:"models",p:6,borderRadius:"lg",bg:"white",boxShadow:"lg",border:"1px",borderColor:"blue.100","scroll-margin-top":"2rem",children:[(0,o.jsxs)(w.z,{spacing:2,mb:4,children:[(0,o.jsx)(h.a,{p:1.5,bg:"blue.100",borderRadius:"md",children:(0,o.jsx)(p.E,{fontSize:"sm",color:"blue.600",children:"\uD83E\uDD16"})}),(0,o.jsx)(x.D,{size:"sm",children:"Add Large Language Models (LLMs)"})]}),(0,o.jsx)(h.a,{children:(0,o.jsxs)(g.T,{spacing:4,align:"stretch",children:[(0,o.jsx)(f.MJ,{children:(0,o.jsxs)(w.z,{spacing:4,align:"center",children:[(0,o.jsx)(b.l,{fontWeight:"medium",fontSize:"sm",mb:0,minW:"fit-content",children:"Select Models from Available API Configurations"}),(0,o.jsx)(h.a,{width:"100%",children:(0,o.jsxs)(y.W,{matchWidth:!0,children:[(0,o.jsx)(S.I,{as:m.$,rightIcon:(0,o.jsx)(s.D,{}),width:"full",bg:"gray.50",size:"sm",textAlign:"left",fontWeight:"normal",children:"Select model"}),(0,o.jsxs)(E.c,{bg:"gray.50",p:0,mt:-2,children:[t.filter(r=>!e.some(e=>e.id===r.id)).length>8&&(0,o.jsx)(h.a,{borderBottom:"1px",borderColor:"gray.200",position:"sticky",top:0,bg:"gray.50",zIndex:1,children:(0,o.jsx)(v.p,{placeholder:"Search models...",size:"sm",value:eh,onChange:e=>ep(e.target.value),bg:"white",border:"none",borderRadius:"0",_focus:{boxShadow:"none",bg:"white"}})}),(0,o.jsx)(h.a,{maxH:"250px",overflowY:"auto",children:0===t.length?(0,o.jsx)(h.a,{p:3,textAlign:"center",fontSize:"sm",color:"gray.500",children:"No models available. Please load API models from the sidebar."}):t.filter(r=>!e.some(e=>e.id===r.id)&&(r.name.toLowerCase().includes(eh.toLowerCase())||r.id.toLowerCase().includes(eh.toLowerCase()))).map(e=>(0,o.jsx)(C.D,{onClick:()=>{r(r=>r.some(r=>r.id===e.id)?r:[...r,e]),ep("")},py:2,bg:"gray.50",_hover:{bg:"gray.100"},children:e.name},e.id))})]})]})})]})}),e.length>0&&(0,o.jsxs)(h.a,{children:[(0,o.jsx)(p.E,{fontWeight:"medium",fontSize:"sm",mb:1.5,children:"Selected Models:"}),(0,o.jsx)(u.s,{wrap:"wrap",gap:2,children:e.map((e,t)=>{let i=null!==e_(e.provider);return(0,o.jsx)(h.a,{bg:i?"blue.50":"yellow.50",border:"1px",borderColor:i?"blue.200":"yellow.300",borderRadius:"md",px:3,py:1.5,children:(0,o.jsxs)(w.z,{spacing:2,align:"center",children:[(0,o.jsxs)(p.E,{fontSize:"xs",color:i?"blue.700":"yellow.700",children:[(0,o.jsxs)(p.E,{as:"span",color:i?"blue.500":"yellow.600",mr:1,children:[t+1,"."]}),(0,o.jsxs)(p.E,{as:"span",color:i?"blue.500":"yellow.600",children:[e.provider,"/"]}),e.name,!i&&(0,o.jsx)(p.E,{as:"span",color:"red.500",ml:1,fontWeight:"bold",children:"(Missing API Key)"})]}),(0,o.jsxs)(w.z,{spacing:1,children:[!i&&(0,o.jsx)(m.$,{size:"xs",variant:"ghost",colorScheme:"yellow",title:"Add ".concat(e.provider," API key"),onClick:()=>{ek(e.provider),setTimeout(()=>{var e;null==(e=document.querySelector(".api-config-section"))||e.scrollIntoView({behavior:"smooth"})},0)},p:1,height:"auto",minW:"auto",_hover:{bg:"yellow.100"},children:"\uD83D\uDD11"}),(0,o.jsx)(m.$,{size:"xs",variant:"ghost",colorScheme:i?"blue":"yellow",onClick:()=>r(r=>r.filter(r=>r.id!==e.id)),p:1,height:"auto",minW:"auto",_hover:{opacity:.8},children:"✕"})]})]})},e.id)})})]})]})})]}),(0,o.jsx)(h.a,{id:"database",p:6,borderRadius:"lg",bg:"white",boxShadow:"lg",border:"1px",borderColor:"blue.100","scroll-margin-top":"2rem",children:(0,o.jsxs)(w.z,{spacing:8,align:"flex-start",children:[(0,o.jsxs)(g.T,{spacing:4,align:"stretch",flex:"1",children:[(0,o.jsxs)(w.z,{spacing:2,children:[(0,o.jsx)(h.a,{p:1.5,bg:"blue.100",borderRadius:"md",children:(0,o.jsx)(p.E,{fontSize:"sm",color:"blue.600",children:"\uD83D\uDCDD"})}),(0,o.jsx)(x.D,{size:"sm",children:"MCQ Database"})]}),(0,o.jsxs)(h.a,{children:[(0,o.jsx)(p.E,{fontSize:"md",color:"gray.700",fontWeight:"medium",mb:1,children:"Question Database File"}),(0,o.jsx)(p.E,{fontSize:"sm",color:"gray.500",children:"Upload a CSV file with columns: ID, Question, and Correct (in any order)"})]}),(0,o.jsx)(m.$,{leftIcon:(0,o.jsx)(a.P,{}),colorScheme:"blue",variant:"solid",onClick:()=>{setTimeout(()=>{var e;null==(e=document.getElementById("file-upload"))||e.click()},0)},width:"full",size:"sm",children:"Upload CSV File"}),(0,o.jsx)(v.p,{id:"file-upload",type:"file",accept:".csv",onChange:eH,display:"none"})]}),(0,o.jsx)(g.T,{spacing:3,align:"stretch",flex:"1",mt:1,children:O?(0,o.jsx)(h.a,{bg:"blue.50",p:4,borderRadius:"md",borderWidth:"1px",borderColor:"blue.200",children:(0,o.jsxs)(g.T,{align:"stretch",spacing:2,children:[(0,o.jsxs)(h.a,{children:[(0,o.jsx)(p.E,{fontSize:"sm",color:"blue.600",mb:.5,children:"Current File"}),(0,o.jsx)(p.E,{fontSize:"md",color:"blue.900",fontWeight:"medium",children:O.name})]}),(0,o.jsxs)(h.a,{children:[(0,o.jsx)(p.E,{fontSize:"sm",color:"blue.600",mb:.5,children:"Question Count"}),(0,o.jsxs)(p.E,{fontSize:"xl",color:"blue.700",fontWeight:"bold",display:"inline",children:[_>0?"".concat(_.toLocaleString()," "):"...",(0,o.jsx)(p.E,{as:"span",fontSize:"xs",color:"gray.500",children:_>0?"questions loaded":"Processing file..."})]})]})]})}):(0,o.jsxs)(h.a,{bg:"gray.50",p:6,borderRadius:"lg",textAlign:"center",padding:45,children:[(0,o.jsx)(p.E,{fontSize:"md",color:"gray.500",children:"No file selected"}),(0,o.jsx)(p.E,{fontSize:"sm",color:"gray.400",mt:1,children:"Upload a CSV file to see details"})]})})]})}),(0,o.jsxs)(h.a,{id:"config",p:6,borderRadius:"lg",bg:"white",boxShadow:"lg",border:"1px",borderColor:"blue.100","scroll-margin-top":"2rem",children:[(0,o.jsxs)(w.z,{spacing:2,mb:4,children:[(0,o.jsx)(h.a,{p:1.5,bg:"blue.100",borderRadius:"md",children:(0,o.jsx)(p.E,{fontSize:"sm",color:"blue.600",children:"⚙️"})}),(0,o.jsx)(x.D,{size:"sm",children:"LLMs Configuration"})]}),(0,o.jsxs)(g.T,{spacing:4,align:"stretch",children:[(0,o.jsxs)(w.z,{spacing:8,align:"flex-start",children:[(0,o.jsxs)(g.T,{spacing:4,align:"stretch",flex:"2",children:[(0,o.jsxs)(f.MJ,{children:[(0,o.jsxs)(b.l,{fontSize:"sm",children:["Temperature: ",M]}),(0,o.jsxs)(T.Ap,{value:M,onChange:F,min:0,max:2,step:.1,colorScheme:"blue",size:"sm",children:[(0,o.jsx)(T.hB,{children:(0,o.jsx)(T.hJ,{})}),(0,o.jsx)(T.OQ,{})]}),(0,o.jsx)(p.E,{fontSize:"xs",color:"gray.500",mt:1,children:"Lower values make the output more focused and deterministic"})]}),(0,o.jsx)(h.a,{mt:2,children:(0,o.jsxs)(w.z,{spacing:3,children:[(0,o.jsx)(m.$,{colorScheme:"blue",maxW:"250px",isDisabled:K&&!(ee&&ec)||0===e.length||!O&&!(ee&&ec),size:"md",leftIcon:(0,o.jsx)(d.D,{transform:"rotate(90deg)",boxSize:3}),onClick:ee&&ec?()=>{if(!ec)return void eM({title:"Cannot Resume",description:"No paused evaluation found.",status:"error",duration:3e3});er(!1),en(!1),eW.current=!1,Z(!0),N(!0),eB(ec),eM({title:"Resuming Evaluation",description:"Evaluation is resuming from where it was paused.",status:"success",duration:3e3})}:eJ,isLoading:K&&!et&&!ee,loadingText:"Running...",children:ee&&ec?"Resume":"Start Evaluation"}),(0,o.jsx)(m.$,{variant:"outline",colorScheme:"orange",size:"md",onClick:()=>{en(!0),eW.current=!0},isDisabled:!K||ee||ei,minW:"100px",_hover:{bg:K&&!ee?"orange.50":void 0},children:ei?"Pausing...":ee?"Paused":"Pause"}),(0,o.jsx)(m.$,{variant:"ghost",colorScheme:"red",size:"md",onClick:()=>{ee?(Z(!1),N(!1),er(!1),en(!1),eW.current=!1,eq.current=!1,eu(null),eM({title:"Evaluation Stopped",description:"Paused evaluation has been stopped.",status:"warning",duration:3e3})):(eo(!0),eq.current=!0,el&&el.abort(),Z(!1),N(!1),er(!1),en(!1),eW.current=!1,eu(null),eM({title:"Evaluation Stopped",description:"Evaluation has been stopped immediately.",status:"warning",duration:3e3}))},isDisabled:!K&&!ee,opacity:K||ee?et?.6:1:.3,minW:"100px",_hover:{bg:K||ee?"red.50":void 0},children:et?"Stopping...":"Stop"})]})})]}),(0,o.jsxs)(f.MJ,{flex:"3",children:[(0,o.jsx)(b.l,{fontSize:"sm",children:"System Prompt"}),(0,o.jsx)(k.T,{value:$,onChange:e=>Q(e.target.value),placeholder:"Enter system prompt for the AI model",rows:5,bg:"gray.50",size:"sm"})]})]}),(0,o.jsx)(h.a,{mt:4,children:K&&(0,o.jsxs)(h.a,{w:"100%",maxW:"300px",mt:3,children:[(0,o.jsxs)(p.E,{fontSize:"sm",color:"blue.600",mb:1,children:["Progress: ",Math.round(ea.current/ea.total*100),"%"]}),(0,o.jsx)(h.a,{w:"full",h:"2px",bg:"blue.100",borderRadius:"full",overflow:"hidden",children:(0,o.jsx)(h.a,{w:"".concat(ea.current/ea.total*100,"%"),h:"full",bg:"blue.500",transition:"width 0.3s ease-in-out"})})]})})]})]}),(0,o.jsxs)(h.a,{id:"evaluation",p:6,borderRadius:"lg",bg:"white",boxShadow:"lg",border:"1px",borderColor:"blue.100","scroll-margin-top":"2rem",mb:9,children:[(0,o.jsxs)(w.z,{spacing:2,mb:4,children:[(0,o.jsx)(h.a,{p:1.5,bg:"blue.100",borderRadius:"md",children:(0,o.jsx)(p.E,{fontSize:"sm",color:"blue.600",children:"\uD83D\uDCCA"})}),(0,o.jsx)(x.D,{size:"sm",children:"Evaluation Results"})]}),0===J.length&&0===Y.length?(0,o.jsx)(h.a,{bg:"blue.50",p:8,borderRadius:"md",borderWidth:"1px",borderColor:"blue.200",textAlign:"center",children:(0,o.jsxs)(g.T,{spacing:4,children:[(0,o.jsx)(h.a,{w:"48px",h:"48px",bg:"blue.100",borderRadius:"full",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:2,children:(0,o.jsx)(p.E,{fontSize:"24px",children:"\uD83D\uDCC8"})}),(0,o.jsxs)(g.T,{spacing:1,children:[(0,o.jsx)(p.E,{fontSize:"lg",fontWeight:"medium",color:"blue.700",children:"No evaluation results yet"}),(0,o.jsx)(p.E,{fontSize:"sm",color:"blue.600",children:"Results will appear here once you start the evaluation"})]})]})}):(0,o.jsxs)(h.a,{children:[(0,o.jsx)(w.z,{spacing:2,mb:6,overflowX:"auto",pb:2,justifyContent:"space-between",children:(0,o.jsx)(w.z,{spacing:2,children:[{id:"results",label:"Results"},{id:"summary",label:"Summary and Charts"},{id:"logs",label:"API Logs"}].map(e=>(0,o.jsx)(m.$,{size:"sm",variant:eg===e.id?"solid":"outline",colorScheme:"blue",borderRadius:"full",px:6,onClick:()=>ex(e.id),children:e.label},e.id))})}),"results"===eg&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.z,{justify:"flex-end",mb:3,children:(0,o.jsx)(m.$,{size:"xs",colorScheme:"blue",variant:"outline",onClick:()=>{if(0===Y.length)return void eM({title:"No Data to Export",description:"Please run an evaluation first before exporting.",status:"warning",duration:3e3});try{let r="",t=["#"];eP&&t.push("Class"),t.push("Question","Len (Char)","Correct"),e.forEach(e=>{t.push("".concat(e.name," - Tokens"),"".concat(e.name," - TTFT (ms)"),"".concat(e.name," - T1"),"".concat(e.name," - T2"),"".concat(e.name," - T3"),"".concat(e.name," - % of 10"))}),r+=t.map(e=>'"'.concat(e,'"')).join(",")+"\n",Y.forEach((t,o)=>{let i=[o+1];eP&&i.push(t.class||"-"),i.push('"'.concat(t.question.replace(/"/g,'""'),'"'),t.length,t.correctAnswer),e.forEach(e=>{let r=t.modelResults[e.id];if(r){var o,n,l,s,a;i.push((null==(o=r.trial1)?void 0:o.tokens)||"-",(null==(n=r.trial1)?void 0:n.time)||"-",(null==(l=r.trial1)?void 0:l.answer)||"-",(null==(s=r.trial2)?void 0:s.answer)||"-",(null==(a=r.trial3)?void 0:a.answer)||"-",void 0!==r.correctPercentage?"".concat(Math.round(r.correctPercentage),"%"):"-")}else i.push("-","-","-","-","-","-")}),r+=i.join(",")+"\n"});let o=new Blob([r],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),n=URL.createObjectURL(o);i.setAttribute("href",n),i.setAttribute("download","evaluation_results_".concat(new Date().toISOString().slice(0,10),".csv")),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),eM({title:"Export Successful",description:"Results exported to CSV file",status:"success",duration:3e3})}catch(e){eM({title:"Export Failed",description:"There was an error exporting the results",status:"error",duration:3e3})}},isDisabled:0===Y.length,children:"Export to CSV"})}),(0,o.jsx)(h.a,{overflowX:"auto",maxW:"100%",sx:{"&::-webkit-scrollbar":{height:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},children:Y.length>0?(0,o.jsxs)(A.X,{variant:"simple",size:"sm",width:"max-content",minW:"100%",children:[(0,o.jsxs)(z.d,{children:[(0,o.jsxs)(R.Tr,{children:[(0,o.jsx)(I.Th,{rowSpan:2,borderRight:"1px",borderColor:"gray.200",fontSize:"10px",minW:"30px",maxW:"40px",children:"#"}),eP&&(0,o.jsx)(I.Th,{rowSpan:2,borderRight:"1px",borderColor:"gray.200",fontSize:"10px",minW:"60px",maxW:"80px",children:"Class"}),(0,o.jsx)(I.Th,{rowSpan:2,borderRight:"1px",borderColor:"gray.200",fontSize:"10px",minW:"150px",maxW:"250px",children:"Question"}),(0,o.jsxs)(I.Th,{rowSpan:2,borderRight:"1px",borderColor:"gray.200",fontSize:"10px",minW:"40px",maxW:"50px",children:["Len",(0,o.jsx)("br",{}),"(Char)"]}),(0,o.jsx)(I.Th,{rowSpan:2,borderRight:"2px",borderColor:"gray.300",fontSize:"10px",minW:"40px",maxW:"50px",children:"Correct"}),e.map(e=>(0,o.jsx)(I.Th,{colSpan:6,textAlign:"center",borderRight:"2px",borderColor:"gray.400",bg:"blue.50",fontSize:"xs",children:e.name},e.id))]}),(0,o.jsx)(R.Tr,{children:e.map(e=>(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(I.Th,{fontSize:"10px",borderRight:"1px",borderColor:"gray.100",minW:"35px",maxW:"45px",children:"Tokens"}),(0,o.jsxs)(I.Th,{fontSize:"10px",borderRight:"1px",borderColor:"gray.100",minW:"35px",maxW:"45px",children:["TTFT",(0,o.jsx)("br",{}),"(ms)"]}),(0,o.jsx)(I.Th,{fontSize:"10px",borderRight:"1px",borderColor:"gray.100",bg:"green.50",minW:"25px",maxW:"35px",children:"T1"}),(0,o.jsx)(I.Th,{fontSize:"10px",borderRight:"1px",borderColor:"gray.100",bg:"blue.50",minW:"25px",maxW:"35px",children:"T2"}),(0,o.jsx)(I.Th,{fontSize:"10px",borderRight:"1px",borderColor:"gray.100",bg:"blue.50",minW:"25px",maxW:"35px",children:"T3"}),(0,o.jsxs)(I.Th,{fontSize:"10px",borderRight:"2px",borderColor:"gray.400",bg:"orange.50",minW:"35px",maxW:"45px",children:["%",(0,o.jsx)("br",{}),"of 10"]})]},"".concat(e.id,"-headers")))})]}),(0,o.jsx)(P.N,{children:Y.map((r,t)=>(0,o.jsxs)(R.Tr,{_hover:{bg:"gray.50"},children:[(0,o.jsx)(D.Td,{borderRight:"1px",borderColor:"gray.200",fontWeight:"medium",fontSize:"xs",children:t+1}),eP&&(0,o.jsx)(D.Td,{borderRight:"1px",borderColor:"gray.200",fontSize:"xs",maxW:"80px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:r.class||"-"}),(0,o.jsx)(D.Td,{borderRight:"1px",borderColor:"gray.200",maxW:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"xs",children:r.question}),(0,o.jsx)(D.Td,{borderRight:"1px",borderColor:"gray.200",fontSize:"xs",children:r.length}),(0,o.jsx)(D.Td,{borderRight:"2px",borderColor:"gray.300",fontSize:"xs",fontWeight:"bold",children:r.correctAnswer}),e.map(e=>{var t,n,l,s,a,d,c,u,h,p,g,x,m,f,b,j,v;let w=r.modelResults[e.id];return w?(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(D.Td,{borderRight:"1px",borderColor:"gray.100",fontSize:"xs",children:(null==(t=w.trial1)?void 0:t.tokens)||"-"}),(0,o.jsx)(D.Td,{borderRight:"1px",borderColor:"gray.100",fontSize:"xs",children:(null==(n=w.trial1)?void 0:n.time)||"-"}),(0,o.jsx)(D.Td,{borderRight:"1px",borderColor:"gray.100",fontSize:"xs",fontWeight:"bold",bg:(null==(l=w.trial1)?void 0:l.aborted)||!(null==(s=w.trial1)?void 0:s.answer)?"white":(null==(a=w.trial1)?void 0:a.correct)?"green.100":"red.100",maxW:"60px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",title:(null==(d=w.trial1)?void 0:d.answer)||"-",children:(null==(c=w.trial1)?void 0:c.answer)||"-"}),(0,o.jsx)(D.Td,{borderRight:"1px",borderColor:"gray.100",fontSize:"xs",fontWeight:"bold",bg:(null==(u=w.trial2)?void 0:u.aborted)||!(null==(h=w.trial2)?void 0:h.answer)?"white":(null==(p=w.trial2)?void 0:p.correct)?"green.100":"red.100",maxW:"60px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",title:(null==(g=w.trial2)?void 0:g.answer)||"-",children:(null==(x=w.trial2)?void 0:x.answer)||"-"}),(0,o.jsx)(D.Td,{borderRight:"1px",borderColor:"gray.100",fontSize:"xs",fontWeight:"bold",bg:(null==(m=w.trial3)?void 0:m.aborted)||!(null==(f=w.trial3)?void 0:f.answer)?"white":(null==(b=w.trial3)?void 0:b.correct)?"green.100":"red.100",maxW:"60px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",title:(null==(j=w.trial3)?void 0:j.answer)||"-",children:(null==(v=w.trial3)?void 0:v.answer)||"-"}),(0,o.jsx)(D.Td,{borderRight:"2px",borderColor:"gray.400",fontSize:"xs",fontWeight:"bold",bg:w.isInconsistent?"orange.100":"white",children:void 0!==w.correctPercentage?"".concat(Math.round(w.correctPercentage),"%"):"-"})]},"".concat(e.id,"-cells")):(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(D.Td,{borderRight:"1px",borderColor:"gray.100",fontSize:"xs",children:"-"}),(0,o.jsx)(D.Td,{borderRight:"1px",borderColor:"gray.100",fontSize:"xs",children:"-"}),(0,o.jsx)(D.Td,{borderRight:"1px",borderColor:"gray.100",fontSize:"xs",bg:"green.50",children:"-"}),(0,o.jsx)(D.Td,{borderRight:"1px",borderColor:"gray.100",fontSize:"xs",bg:"blue.50",children:"-"}),(0,o.jsx)(D.Td,{borderRight:"1px",borderColor:"gray.100",fontSize:"xs",bg:"blue.50",children:"-"}),(0,o.jsx)(D.Td,{borderRight:"2px",borderColor:"gray.400",fontSize:"xs",bg:"orange.50",children:"-"})]},"".concat(e.id,"-cells-empty"))})]},"result-".concat(t)))})]}):J.length>0?(0,o.jsxs)(A.X,{variant:"simple",children:[(0,o.jsx)(z.d,{children:(0,o.jsxs)(R.Tr,{children:[(0,o.jsx)(I.Th,{children:"Question"}),e.map(e=>(0,o.jsx)(I.Th,{children:e.name},e.id))]})}),(0,o.jsx)(P.N,{children:J.map((r,t)=>(0,o.jsxs)(R.Tr,{children:[(0,o.jsx)(D.Td,{children:r.questionId}),e.map(e=>(0,o.jsx)(D.Td,{children:r.modelResults[e.id]?"✅":"❌"},e.id))]},"summary-".concat(t)))})]}):(0,o.jsx)(h.a,{p:8,textAlign:"center",children:(0,o.jsx)(p.E,{color:"gray.500",children:"No results yet. Start an evaluation to see results."})})})]}),"summary"===eg&&(0,o.jsx)(h.a,{children:(0,o.jsxs)(g.T,{spacing:4,align:"stretch",children:[(0,o.jsx)(p.E,{fontSize:"lg",fontWeight:"bold",children:"Overall Accuracy"}),(0,o.jsxs)(w.z,{spacing:2,wrap:"wrap",justify:"space-between",children:[(0,o.jsxs)(w.z,{spacing:2,children:[(0,o.jsx)(m.$,{size:"xs",variant:"table"===em?"solid":"outline",colorScheme:"blue",onClick:()=>ef("table"),children:"Table"}),[{id:"bar",label:"Accuracy Per Trial"},{id:"comparison",label:"Overall Accuracy"}].map(e=>(0,o.jsx)(m.$,{size:"xs",variant:"charts"===em&&eb===e.id?"solid":"outline",colorScheme:"blue",onClick:()=>{ef("charts"),ej(e.id)},children:e.label},e.id))]}),"table"===em?(0,o.jsx)(m.$,{size:"xs",colorScheme:"blue",variant:"outline",onClick:e$,isDisabled:0===Y.length,children:"Export Table"}):(0,o.jsxs)(y.W,{children:[(0,o.jsx)(S.I,{as:m.$,size:"xs",colorScheme:"blue",variant:"outline",rightIcon:(0,o.jsx)(s.D,{}),isDisabled:0===Y.length,children:"Export Chart"}),(0,o.jsxs)(E.c,{minW:"auto",fontSize:"sm",children:[(0,o.jsx)(C.D,{onClick:()=>eQ("png"),fontSize:"sm",children:"Export as PNG"}),(0,o.jsx)(C.D,{onClick:()=>eQ("svg"),fontSize:"sm",children:"Export as SVG"})]})]})]}),"table"===em&&(0,o.jsx)(g.T,{spacing:4,align:"stretch",w:"full",children:eP?(0,o.jsx)(h.a,{borderWidth:"1px",borderRadius:"md",p:3,bg:"white",children:(0,o.jsx)(h.a,{overflowX:"auto",children:(0,o.jsxs)(A.X,{size:"sm",variant:"simple",children:[(0,o.jsx)(z.d,{children:(0,o.jsxs)(R.Tr,{children:[(0,o.jsx)(I.Th,{children:"Model"}),(0,o.jsx)(I.Th,{isNumeric:!0,children:"Trial 1"}),(0,o.jsx)(I.Th,{isNumeric:!0,children:"Trial 2"}),(0,o.jsx)(I.Th,{isNumeric:!0,children:"Trial 3"}),(0,o.jsx)(I.Th,{isNumeric:!0,children:"Average"})]})}),(0,o.jsx)(P.N,{children:e.map(e=>{let r=0,t=0,i=0,n=0;Y.forEach(o=>{let l=o.modelResults[e.id];if(l){var s,a,d;n++,(null==(s=l.trial1)?void 0:s.correct)&&r++,(null==(a=l.trial2)?void 0:a.correct)&&t++,(null==(d=l.trial3)?void 0:d.correct)&&i++}});let l=n>0?r/n*100:0,s=n>0?t/n*100:0,a=n>0?i/n*100:0,d=(l+s+a)/3;return(0,o.jsxs)(R.Tr,{children:[(0,o.jsx)(D.Td,{fontWeight:"medium",children:e.name}),(0,o.jsx)(D.Td,{isNumeric:!0,children:(0,o.jsxs)(p.E,{color:l>=70?"green.600":l>=50?"orange.600":"red.600",children:[l.toFixed(1),"%"]})}),(0,o.jsx)(D.Td,{isNumeric:!0,children:(0,o.jsxs)(p.E,{color:s>=70?"green.600":s>=50?"orange.600":"red.600",children:[s.toFixed(1),"%"]})}),(0,o.jsx)(D.Td,{isNumeric:!0,children:(0,o.jsxs)(p.E,{color:a>=70?"green.600":a>=50?"orange.600":"red.600",children:[a.toFixed(1),"%"]})}),(0,o.jsx)(D.Td,{isNumeric:!0,fontWeight:"bold",children:(0,o.jsxs)(p.E,{color:d>=70?"green.600":d>=50?"orange.600":"red.600",children:[d.toFixed(1),"%"]})})]},e.id)})})]})})}):(0,o.jsx)(h.a,{borderWidth:"1px",borderRadius:"md",p:3,bg:"white",children:(0,o.jsx)(h.a,{overflowX:"auto",children:(0,o.jsxs)(A.X,{size:"sm",variant:"simple",children:[(0,o.jsx)(z.d,{children:(0,o.jsxs)(R.Tr,{children:[(0,o.jsx)(I.Th,{children:"Model"}),(0,o.jsx)(I.Th,{isNumeric:!0,children:"Trial 1"}),(0,o.jsx)(I.Th,{isNumeric:!0,children:"Trial 2"}),(0,o.jsx)(I.Th,{isNumeric:!0,children:"Trial 3"}),(0,o.jsx)(I.Th,{isNumeric:!0,children:"Average"})]})}),(0,o.jsx)(P.N,{children:e.map(e=>{let r=0,t=0,i=0,n=0;Y.forEach(o=>{let l=o.modelResults[e.id];if(l){var s,a,d;n++,(null==(s=l.trial1)?void 0:s.correct)&&r++,(null==(a=l.trial2)?void 0:a.correct)&&t++,(null==(d=l.trial3)?void 0:d.correct)&&i++}});let l=n>0?r/n*100:0,s=n>0?t/n*100:0,a=n>0?i/n*100:0,d=(l+s+a)/3;return(0,o.jsxs)(R.Tr,{children:[(0,o.jsx)(D.Td,{fontWeight:"medium",children:e.name}),(0,o.jsx)(D.Td,{isNumeric:!0,children:(0,o.jsxs)(p.E,{color:l>=70?"green.600":l>=50?"orange.600":"red.600",children:[l.toFixed(1),"%"]})}),(0,o.jsx)(D.Td,{isNumeric:!0,children:(0,o.jsxs)(p.E,{color:s>=70?"green.600":s>=50?"orange.600":"red.600",children:[s.toFixed(1),"%"]})}),(0,o.jsx)(D.Td,{isNumeric:!0,children:(0,o.jsxs)(p.E,{color:a>=70?"green.600":a>=50?"orange.600":"red.600",children:[a.toFixed(1),"%"]})}),(0,o.jsx)(D.Td,{isNumeric:!0,fontWeight:"bold",children:(0,o.jsxs)(p.E,{color:d>=70?"green.600":d>=50?"orange.600":"red.600",children:[d.toFixed(1),"%"]})})]},e.id)})})]})})})}),"charts"===em&&(0,o.jsx)(h.a,{borderWidth:"1px",borderRadius:"md",p:4,bg:"white",children:(0,o.jsx)(g.T,{spacing:4,align:"stretch",children:(0,o.jsxs)(h.a,{id:"chart-container",children:["bar"===eb&&(0,o.jsx)(h.a,{children:(0,o.jsx)(h.a,{h:"480px",position:"relative",bg:"white",p:4,children:(0,o.jsx)(n.yP,{data:{labels:e.map(e=>e.name.length>25?e.name.substring(0,22)+"...":e.name),datasets:[{label:"Trial 1",data:e.map(e=>{let r=0,t=0;return Y.forEach(o=>{let i=o.modelResults[e.id];if(i){var n;t++,(null==(n=i.trial1)?void 0:n.correct)&&r++}}),t>0?r/t*100:0}),backgroundColor:"#3b82f6",borderColor:"#1e40af",borderWidth:1},{label:"Trial 2",data:e.map(e=>{let r=0,t=0;return Y.forEach(o=>{let i=o.modelResults[e.id];if(i){var n;t++,(null==(n=i.trial2)?void 0:n.correct)&&r++}}),t>0?r/t*100:0}),backgroundColor:"#10b981",borderColor:"#059669",borderWidth:1},{label:"Trial 3",data:e.map(e=>{let r=0,t=0;return Y.forEach(o=>{let i=o.modelResults[e.id];if(i){var n;t++,(null==(n=i.trial3)?void 0:n.correct)&&r++}}),t>0?r/t*100:0}),backgroundColor:"#f59e0b",borderColor:"#d97706",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{size:12,weight:600},padding:15}},title:{display:!0,text:"Accuracy Per Trial",font:{size:16,weight:"bold"},padding:{bottom:20}},tooltip:{callbacks:{label:function(e){var r,t;return"".concat(e.dataset.label,": ").concat(null!=(t=null==(r=e.parsed.y)?void 0:r.toFixed(1))?t:0,"%")}}}},scales:{y:{beginAtZero:!0,max:100,ticks:{callback:function(e){return e+"%"},font:{size:12}},grid:{color:"#ddd"}},x:{ticks:{font:{size:11,weight:600}},grid:{display:!1}}}}})})}),"comparison"===eb&&(0,o.jsx)(h.a,{children:(0,o.jsx)(h.a,{h:"480px",position:"relative",bg:"white",p:4,children:(0,o.jsx)(n.yP,{data:{labels:e.map(e=>e.name.length>20?e.name.substring(0,17)+"...":e.name),datasets:[{label:"Overall Accuracy",data:e.map(e=>{let r=0,t=0,o=0,i=0;return Y.forEach(n=>{let l=n.modelResults[e.id];if(l){var s,a,d;i++,(null==(s=l.trial1)?void 0:s.correct)&&r++,(null==(a=l.trial2)?void 0:a.correct)&&t++,(null==(d=l.trial3)?void 0:d.correct)&&o++}}),i>0?(r+t+o)/(3*i)*100:0}),backgroundColor:e.map((e,r)=>{let t=["#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899","#f43f5e","#ef4444","#f97316","#f59e0b","#eab308","#84cc16","#22c55e","#10b981","#14b8a6","#06b6d4"];return t[r%t.length]}),borderColor:e.map((e,r)=>{let t=["#2563eb","#4f46e5","#7c3aed","#9333ea","#c026d3","#db2777","#e11d48","#dc2626","#ea580c","#d97706","#ca8a04","#65a30d","#16a34a","#059669","#0d9488","#0891b2"];return t[r%t.length]}),borderWidth:2,borderRadius:3}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Overall Accuracy",font:{size:16,weight:"bold"},padding:{bottom:20}},tooltip:{callbacks:{label:function(e){var r;let t=null!=(r=e.parsed.y)?r:0;return"Accuracy: ".concat(t.toFixed(1),"%")}}}},scales:{y:{beginAtZero:!0,max:100,title:{display:!0,text:"Overall Accuracy (%)",font:{size:13,weight:"bold"}},ticks:{callback:function(e){return e+"%"},font:{size:12}},grid:{color:"#ddd"}},x:{ticks:{font:{size:11,weight:600},maxRotation:15,minRotation:15},grid:{display:!1}}}}})})})]})})})]})}),"summary"===eg&&eP&&(0,o.jsx)(h.a,{mt:6,children:(0,o.jsxs)(g.T,{spacing:4,align:"stretch",children:[(0,o.jsx)(p.E,{fontSize:"lg",fontWeight:"bold",children:"Accuracy Per Question Class"}),(0,o.jsxs)(w.z,{spacing:2,wrap:"wrap",justify:"space-between",children:[(0,o.jsxs)(w.z,{spacing:2,children:[(0,o.jsx)(m.$,{size:"xs",variant:"table"===ev?"solid":"outline",colorScheme:"blue",onClick:()=>ew("table"),children:"Table"}),[{id:"by-class",label:"Accuracy Per Model by Class"},{id:"by-class-and-trial",label:"Average Accuracy by Class and Model"}].map(e=>(0,o.jsx)(m.$,{size:"xs",variant:"charts"===ev&&ey===e.id?"solid":"outline",colorScheme:"blue",onClick:()=>{ew("charts"),eS(e.id)},children:e.label},e.id))]}),"table"===ev?(0,o.jsx)(m.$,{size:"xs",colorScheme:"blue",variant:"outline",onClick:e$,isDisabled:0===Y.length,children:"Export Table"}):(0,o.jsxs)(y.W,{children:[(0,o.jsx)(S.I,{as:m.$,size:"xs",colorScheme:"blue",variant:"outline",rightIcon:(0,o.jsx)(s.D,{}),isDisabled:0===Y.length,children:"Export Chart"}),(0,o.jsxs)(E.c,{minW:"auto",fontSize:"sm",children:[(0,o.jsx)(C.D,{onClick:()=>eQ("png"),fontSize:"sm",children:"Export as PNG"}),(0,o.jsx)(C.D,{onClick:()=>eQ("svg"),fontSize:"sm",children:"Export as SVG"})]})]})]}),"table"===ev&&(0,o.jsx)(g.T,{spacing:4,align:"stretch",w:"full",children:(()=>{let r=Array.from(new Set(Y.map(e=>e.class).filter(Boolean))).sort();return(0,o.jsx)(h.a,{borderWidth:"1px",borderRadius:"md",p:4,bg:"white",children:(0,o.jsx)(h.a,{overflowX:"auto",children:(0,o.jsxs)(A.X,{size:"sm",variant:"simple",children:[(0,o.jsxs)(z.d,{children:[(0,o.jsxs)(R.Tr,{children:[(0,o.jsx)(I.Th,{rowSpan:2,borderBottom:"2px",whiteSpace:"nowrap",children:"Model"}),r.map(e=>(0,o.jsx)(I.Th,{colSpan:4,textAlign:"center",borderBottom:"1px",whiteSpace:"nowrap",children:e},e)),(0,o.jsx)(I.Th,{rowSpan:2,textAlign:"center",borderLeft:"2px",borderBottom:"2px",bg:"blue.50",whiteSpace:"nowrap",children:"Avg"})]}),(0,o.jsx)(R.Tr,{children:r.map(e=>(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(I.Th,{fontSize:"xs",textAlign:"center",borderBottom:"2px",whiteSpace:"nowrap",width:"1%",children:"T1"}),(0,o.jsx)(I.Th,{fontSize:"xs",textAlign:"center",borderBottom:"2px",whiteSpace:"nowrap",width:"1%",children:"T2"}),(0,o.jsx)(I.Th,{fontSize:"xs",textAlign:"center",borderBottom:"2px",whiteSpace:"nowrap",width:"1%",children:"T3"}),(0,o.jsx)(I.Th,{fontSize:"xs",textAlign:"center",borderBottom:"2px",borderRight:"2px",whiteSpace:"nowrap",width:"1%",children:"Avg"})]},"".concat(e,"-headers")))})]}),(0,o.jsx)(P.N,{children:e.map(e=>(0,o.jsxs)(R.Tr,{children:[(0,o.jsx)(D.Td,{fontWeight:"medium",borderRight:"1px",whiteSpace:"nowrap",children:e.name}),r.map(r=>{let t=0,n=0,l=0,s=0;Y.forEach(o=>{if(o.class===r){let r=o.modelResults[e.id];if(r){var i,a,d;s++,(null==(i=r.trial1)?void 0:i.correct)&&t++,(null==(a=r.trial2)?void 0:a.correct)&&n++,(null==(d=r.trial3)?void 0:d.correct)&&l++}}});let a=s>0?t/s*100:0,d=s>0?n/s*100:0,c=s>0?l/s*100:0,u=(a+d+c)/3;return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(D.Td,{fontSize:"xs",textAlign:"center",whiteSpace:"nowrap",width:"1%",children:(0,o.jsx)(p.E,{color:a>=70?"green.600":a>=50?"orange.600":"red.600",children:s>0?a.toFixed(1):"-"})}),(0,o.jsx)(D.Td,{fontSize:"xs",textAlign:"center",whiteSpace:"nowrap",width:"1%",children:(0,o.jsx)(p.E,{color:d>=70?"green.600":d>=50?"orange.600":"red.600",children:s>0?d.toFixed(1):"-"})}),(0,o.jsx)(D.Td,{fontSize:"xs",textAlign:"center",whiteSpace:"nowrap",width:"1%",children:(0,o.jsx)(p.E,{color:c>=70?"green.600":c>=50?"orange.600":"red.600",children:s>0?c.toFixed(1):"-"})}),(0,o.jsx)(D.Td,{fontSize:"xs",textAlign:"center",fontWeight:"bold",borderRight:"2px",whiteSpace:"nowrap",width:"1%",children:(0,o.jsx)(p.E,{color:u>=70?"green.600":u>=50?"orange.600":"red.600",children:s>0?u.toFixed(1):"-"})})]},"".concat(e.id,"-").concat(r))}),(()=>{let r=0,t=0,i=0,n=0;Y.forEach(o=>{let l=o.modelResults[e.id];if(l){var s,a,d;n++,(null==(s=l.trial1)?void 0:s.correct)&&r++,(null==(a=l.trial2)?void 0:a.correct)&&t++,(null==(d=l.trial3)?void 0:d.correct)&&i++}});let l=((n>0?r/n*100:0)+(n>0?t/n*100:0)+(n>0?i/n*100:0))/3;return(0,o.jsx)(D.Td,{textAlign:"center",borderLeft:"2px",borderRight:"2px",bg:"blue.50",fontWeight:"bold",whiteSpace:"nowrap",children:(0,o.jsx)(p.E,{color:l>=70?"green.600":l>=50?"orange.600":"red.600",children:n>0?l.toFixed(1):"-"})})})()]},e.id))})]})})})})()}),"charts"===ev&&(0,o.jsx)(h.a,{borderWidth:"1px",borderRadius:"md",p:4,bg:"white",children:(0,o.jsx)(g.T,{spacing:4,align:"stretch",children:(0,o.jsxs)(h.a,{id:"chart-container",children:["by-class"===ey&&(()=>{let r=Array.from(new Set(Y.map(e=>e.class).filter(Boolean))).sort(),t=[{bg:"#3b82f6",border:"#2563eb"},{bg:"#10b981",border:"#059669"},{bg:"#f59e0b",border:"#d97706"},{bg:"#8b5cf6",border:"#7c3aed"},{bg:"#ec4899",border:"#db2777"},{bg:"#06b6d4",border:"#0891b2"},{bg:"#ef4444",border:"#dc2626"},{bg:"#84cc16",border:"#65a30d"}],i=r.map((r,o)=>{let i=e.map(e=>{let t=0,o=0,i=0,n=0;return Y.forEach(l=>{if(l.class===r){let r=l.modelResults[e.id];if(r){var s,a,d;n++,(null==(s=r.trial1)?void 0:s.correct)&&t++,(null==(a=r.trial2)?void 0:a.correct)&&o++,(null==(d=r.trial3)?void 0:d.correct)&&i++}}}),n>0?(t+o+i)/(3*n)*100:0}),n=t[o%t.length];return{label:r,data:i,backgroundColor:n.bg,borderColor:n.border,borderWidth:1}});return(0,o.jsx)(h.a,{h:"480px",position:"relative",bg:"white",p:4,children:(0,o.jsx)(n.yP,{data:{labels:e.map(e=>e.name.length>25?e.name.substring(0,22)+"...":e.name),datasets:i},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Accuracy Per Model by Class",font:{size:16,weight:"bold"}},legend:{position:"bottom"},tooltip:{callbacks:{label:function(e){let r=e.parsed.y;return null===r?"":e.dataset.label+": "+r.toFixed(1)+"%"}}}},scales:{y:{beginAtZero:!0,max:100,title:{display:!0,text:"Average Accuracy (%)",font:{size:14,weight:"bold"}},ticks:{callback:function(e){return e+"%"},font:{size:12}},grid:{color:"#ddd"}},x:{title:{display:!0,text:"Model",font:{size:14,weight:"bold"}},ticks:{font:{size:11,weight:600}},grid:{display:!1}}}}})})})(),"by-class-and-trial"===ey&&(()=>{let r=Array.from(new Set(Y.map(e=>e.class).filter(Boolean))).sort(),t=e.map((e,t)=>{let o=r.map(r=>{let t=0,o=0,i=0,n=0;return Y.forEach(l=>{if(l.class===r){let r=l.modelResults[e.id];if(r){var s,a,d;n++,(null==(s=r.trial1)?void 0:s.correct)&&t++,(null==(a=r.trial2)?void 0:a.correct)&&o++,(null==(d=r.trial3)?void 0:d.correct)&&i++}}}),n>0?(t+o+i)/(3*n)*100:0}),i=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#84cc16"],n=i[t%i.length];return{label:e.name.length>25?e.name.substring(0,22)+"...":e.name,data:o,backgroundColor:n,borderColor:n,borderWidth:1}});return(0,o.jsx)(h.a,{h:"480px",position:"relative",bg:"white",p:4,children:(0,o.jsx)(n.yP,{data:{labels:r,datasets:t},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Average Accuracy by Class and Model",font:{size:16,weight:"bold"}},legend:{position:"bottom"},tooltip:{callbacks:{label:function(e){let r=e.parsed.y;return null===r?"":e.dataset.label+": "+r.toFixed(1)+"%"}}}},scales:{y:{beginAtZero:!0,max:100,title:{display:!0,text:"Average Accuracy (%)",font:{size:14,weight:"bold"}},ticks:{callback:function(e){return e+"%"},font:{size:12}},grid:{color:"#ddd"}},x:{title:{display:!0,text:"Question Class",font:{size:14,weight:"bold"}},ticks:{font:{size:11,weight:600}},grid:{display:!1}}}}})})})()]})})})]})}),"logs"===eg&&(0,o.jsxs)(h.a,{children:[(0,o.jsxs)(w.z,{justify:"space-between",mb:3,align:"center",children:[(0,o.jsxs)(p.E,{fontSize:"sm",color:"gray.600",children:["Showing ",eE.length," API call",1!==eE.length?"s":""]}),(0,o.jsxs)(w.z,{spacing:2,children:[(0,o.jsx)(m.$,{size:"xs",colorScheme:"blue",variant:"outline",onClick:()=>{if(0===eE.length)return void eM({title:"No Logs to Export",description:"Please run an evaluation first to generate API logs.",status:"warning",duration:3e3});try{let e="Timestamp,Provider,Model,Question ID,Question,Duration (ms),Temperature,Prompt Tokens,Completion Tokens,Total Tokens,Answer,Correct,Error\n";eE.forEach(r=>{var t,o;let i=new Date(r.timestamp).toLocaleString(),n=r.provider||"",l=r.model||"",s=r.questionId||"",a=(r.question||"").replace(/"/g,'""'),d=r.duration||0,c=void 0!==r.temperature?r.temperature:"",u=r.promptTokens||0,h=r.completionTokens||0,p=r.totalTokens||0,g=(null==(t=r.response)?void 0:t.answer)||"",x=(null==(o=r.response)?void 0:o.correct)?"Yes":"No",m=r.error?r.error.replace(/"/g,'""'):"";e+='"'.concat(i,'","').concat(n,'","').concat(l,'","').concat(s,'","').concat(a,'",').concat(d,",").concat(c,",").concat(u,",").concat(h,",").concat(p,',"').concat(g,'","').concat(x,'","').concat(m,'"\n')});let r=new Blob([e],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),o=URL.createObjectURL(r);t.setAttribute("href",o),t.setAttribute("download","api_logs_".concat(new Date().toISOString().slice(0,10),".csv")),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t),eM({title:"Logs Exported Successfully",description:"".concat(eE.length," API log").concat(1!==eE.length?"s":""," exported to CSV"),status:"success",duration:3e3})}catch(e){eM({title:"Export Failed",description:"There was an error exporting the logs",status:"error",duration:3e3})}},isDisabled:0===eE.length,children:"Export Logs"}),(0,o.jsx)(m.$,{size:"xs",colorScheme:"blue",variant:"outline",onClick:()=>eC([]),isDisabled:0===eE.length,children:"Clear Logs"})]})]}),(0,o.jsx)(h.a,{maxH:"500px",overflowY:"auto",borderWidth:"1px",borderRadius:"md",children:0===eE.length?(0,o.jsx)(h.a,{p:4,textAlign:"center",children:(0,o.jsx)(p.E,{color:"gray.500",children:"No API logs available"})}):eE.map((e,r)=>{var t,i,n;return(0,o.jsxs)(h.a,{p:3,borderBottomWidth:r<eE.length-1?"1px":"0",bg:e.error?"red.50":(null==(t=e.response)?void 0:t.correct)?"green.50":"orange.50",children:[(0,o.jsxs)(g.T,{spacing:1,align:"stretch",mb:1,children:[(0,o.jsxs)(w.z,{justify:"space-between",children:[(0,o.jsxs)(w.z,{spacing:1,children:[(0,o.jsxs)(p.E,{fontSize:"xs",fontWeight:"medium",children:[e.model,":"]}),e.error?(0,o.jsx)(p.E,{fontSize:"xs",color:"red.600",children:"Error"}):e.response?(0,o.jsxs)(p.E,{fontSize:"xs",children:[e.response.answer," ",e.response.correct?"✓":"✗"]}):null,e.correctAnswer&&(0,o.jsxs)(p.E,{fontSize:"xs",color:"blue.600",children:["(Correct: ",e.correctAnswer,")"]})]}),(0,o.jsxs)(w.z,{spacing:2,fontSize:"xs",children:[void 0!==e.promptTokens&&(0,o.jsxs)(p.E,{color:"gray.600",children:["Tokens: ",e.promptTokens,"/",e.completionTokens," (",e.totalTokens,")"]}),(0,o.jsxs)(p.E,{color:"gray.600",children:["Temp: ",void 0!==e.temperature?e.temperature.toFixed(1):"1.0"]}),(0,o.jsx)(p.E,{as:"span",color:"blue.500",cursor:"pointer",fontWeight:"bold",fontSize:"10px",onClick:()=>{eC(e=>e.map((e,t)=>t===r?{...e,showFullRequest:!e.showFullRequest}:e))},children:e.showFullRequest?"Hide Request":"Show Full Request"}),(0,o.jsxs)(p.E,{color:"gray.500",children:[new Date(e.timestamp).toLocaleTimeString()," • ",e.duration,"ms"]})]})]}),e.showFullRequest&&e.request&&(0,o.jsxs)(h.a,{mt:1,p:2,bg:"gray.50",borderRadius:"sm",fontSize:"xs",whiteSpace:"pre-wrap",maxH:"400px",overflowY:"auto",width:"100%",border:"1px",borderColor:"gray.200",children:[(0,o.jsx)(p.E,{fontWeight:"medium",mb:1,children:"System Prompt:"}),(0,o.jsx)(p.E,{mb:2,children:(null==(n=e.request.messages)||null==(i=n[0])?void 0:i.content)||"N/A"}),(0,o.jsx)(p.E,{fontWeight:"medium",mb:1,children:"API Request:"}),(0,o.jsx)(p.E,{fontFamily:"mono",fontSize:"10px",mb:2,children:JSON.stringify(e.request,null,2)}),e.response&&!e.error&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.E,{fontWeight:"medium",mb:1,color:"green.600",children:"API Response:"}),(0,o.jsx)(p.E,{fontFamily:"mono",fontSize:"10px",children:JSON.stringify(e.response,null,2)})]})]})]}),(0,o.jsx)(h.a,{bg:"white",p:2,borderRadius:"sm",mb:1,cursor:e.question&&e.question.length>100?"pointer":"default",onClick:()=>{e.question&&e.question.length>100&&eC(e=>e.map((e,t)=>t===r?{...e,expanded:!e.expanded}:e))},children:(0,o.jsx)(w.z,{justify:"space-between",align:"start",children:(0,o.jsxs)(g.T,{align:"start",spacing:1,width:"100%",children:[(0,o.jsxs)(w.z,{width:"100%",justify:"space-between",children:[(0,o.jsxs)(p.E,{fontSize:"xs",fontWeight:"medium",color:"gray.600",children:["Question ID: ",e.questionId||"N/A"]}),e.question&&e.question.length>100&&(0,o.jsx)(p.E,{as:"span",color:"blue.500",fontSize:"10px",cursor:"pointer",children:e.expanded?"collapse":"expand"})]}),(0,o.jsx)(p.E,{fontSize:"xs",width:"100%",children:e.question?e.expanded||e.question.length<=100?e.question:"".concat(e.question.substring(0,100),"..."):"No question data"})]})})})]},r)})})]})]})]})]})})})]})}}},e=>{e.O(0,[647,260,972,441,255,358],()=>e(e.s=5227)),_N_E=e.O()}]);